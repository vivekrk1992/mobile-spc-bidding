<ion-header>
  <ion-navbar>
    <ion-title>
      <span class="navbar-title">Quote/Order History</span>
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <!-- <span style="float:right; color:chocolate;font-size:17px; font-weight:bold">logout</span> -->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <!-- <ion-col *ngFor="let domestic_quote of domestic_quotes; let i = index">
    <ion-card style="padding-bottom:0px; margin-bottom:0px" [ngStyle]="{'background-color': isBidStatusAccepted(domestic_quote.bid_status)? '#A2A240':'#C2A792'}">
      <ion-card-header>
        <ion-row class="tiny-date-row bidding-card-main-content">
          <ion-col>Quote Date: {{domestic_quote.buyer_date_needed}}</ion-col><ion-col>Status:
            <span *ngIf="domestic_quote.bid_status == 1">Bidding</span>
            <span *ngIf="domestic_quote.bid_status == 2">Expiry</span>
            <span *ngIf="domestic_quote.bid_status == 3">Accepted</span>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col (click)="navToSaleOrderDetails(domestic_quote)"><span class="header-text">Q-Price</span><br><span class="sub-header-text">(Rs/Kg)</span><br><span class="content-text">{{domestic_quote.spc_rate}}</span></ion-col>
          <ion-col><span class="header-text">Last Bid</span><br><span class="sub-header-text">(spc | You)</span><br><span class="content-text">{{domestic_quote.spc_rate}}</span> | <span class="content-text">{{domestic_quote.buyer_rate}}</span></ion-col>
          <ion-col><span class="header-text">Quantity</span><br><span class="sub-header-text">(Bags)</span><br><span class="content-text">{{domestic_quote.buyer_quantity}}</span></ion-col>
          <ion-col (click)="routeToGrievancePage(domestic_quote.id)" col-1><ion-icon style="font-size: 25px" name="outlet"></ion-icon></ion-col>
        </ion-row>
      </ion-card-header>
    </ion-card>
  </ion-col> -->
  <br>
  <ion-row>
    <ion-col text-center style="color:orangered; font-weight: bold;">Unpaid Order(s)</ion-col>
  </ion-row>
  <ion-card>
    <ion-row>
      <ion-col col-2>
        <span class="header-text">Date</span>
      </ion-col>
      <ion-col col-4>
        <span class="header-text">Description</span>
      </ion-col>
      <ion-col col-3>
        <span class="header-text">Cost</span>
      </ion-col>
      <ion-col col-3>
        <span class="header-text">Status</span>
      </ion-col>
    </ion-row>
    <span *ngFor="let domestic_quote of domestic_quotes; let i = index">
      <ion-col *ngFor="let sale of domestic_quote['unpaid']">
        <ion-row>
          <ion-col col-2 class="tiny-date-row bidding-card-main-content">{{sale.expected_delivery_date | date: 'dd-MMM'}}</ion-col>
          <ion-col col-4>
            <span *ngIf="sale['bag_type_id'] == 1">
              <ion-col class="header-text">
                ₹{{sale.rate}} x {{sale.bag_count}} bags x 50 Kg
              </ion-col>
              <!-- <ion-col>
              <span class="sub-header-text"> Total = <span class="content-text">₹&nbsp;{{totalCost(sale.rate, sale.bag_count, 50) | number : '.2'}}</span></span>
            </ion-col> -->
            </span>

            <span *ngIf="sale['bag_type_id'] == 2">
              <ion-col class="header-text">
                ₹{{sale.rate}} x {{sale.bag_count}} bags x 25 Kg
              </ion-col>
              <!-- <ion-col>
              <span class="sub-header-text"> Total = <span class="content-text">₹&nbsp;{{totalCost(sale.rate, sale.bag_count, 25) | number : '.2'}}</span></span>
            </ion-col> -->
            </span>
          </ion-col>
          <ion-col col-3>
            <span class="content-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
            <!-- <span *ngIf="sale['bag_type_id'] == 1">
              <span class="content-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
            </span>
            <span *ngIf="sale['bag_type_id'] == 2">
              <span class="content-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
            </span> -->
          </ion-col>
          <ion-col col-3 class="sub-header-text">
            {{sale.sale_status}}
          </ion-col>
        </ion-row>
      </ion-col>
      <ion-row>
        <ion-col class="header-text">
          Total Unpaid Amount = ₹&nbsp;{{total_cost_unpaid | number : '.2'}}
        </ion-col>
      </ion-row>
    </span>
    <ion-row>
      <ion-col>
        <!-- <span class="header-text" *ngIf="domestic_quote['bag_type_id'] == 1">Total Outstanding = <span class="sub-header-text">₹&nbsp;{{totalCost(domestic_quote.rate, domestic_quote.bag_count, 50) | number : '.2'}}</span></span> -->
        <!-- <span class="header-text" *ngIf="domestic_quote['bag_type_id'] == 3">Total Outstanding = <span class="sub-header-text">₹&nbsp;{{totalCost(domestic_quote.rate, domestic_quote.bag_count, 25) | number : '.2'}}</span></span> -->
      </ion-col>
    </ion-row>
  </ion-card>
  <hr>
  <ion-row>
    <ion-col text-center style="color: darkolivegreen; font-weight: bold;">Partially Paid Order(s)</ion-col>
  </ion-row>
  <ion-card>
    <ion-row>
      <ion-col col-2>
        <span class="header-text">Date</span>
      </ion-col>
      <ion-col col-3>
        <span class="header-text">Cost</span>
      </ion-col>
      <ion-col col-4>
        <span class="header-text">Amount Balance</span>
      </ion-col>
      <ion-col col-3>
        <span class="header-text">Status</span>
      </ion-col>
    </ion-row>
    <span *ngFor="let domestic_quote of domestic_quotes; let i = index">
      <ion-col *ngFor="let sale of domestic_quote['partially_paid']">
        <ion-row>
          <ion-col col-2 class="tiny-date-row bidding-card-main-content">{{sale.expected_delivery_date | date: 'dd-MMM'}}</ion-col>
          <ion-col col-3>
            <!-- <span *ngIf="sale['bag_type_id'] == 1">
              <span class="header-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
            </span>
            <span *ngIf="sale['bag_type_id'] == 2">
              <span class="header-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
            </span> -->
            <span class="header-text">₹&nbsp;{{sale.product_cost | number : '.2'}}</span>
          </ion-col>
          <ion-col col-4>
            <span class="content-text">₹&nbsp;{{sale.pending_amount | number : '.2'}}</span>
            <!-- <span *ngIf="sale['bag_type_id'] == 1">
              <span class="content-text">₹&nbsp;{{sale.product_cost - sale.amount_received | number : '.2'}}</span>
            </span>
            <span *ngIf="sale['bag_type_id'] == 2">
              <span class="content-text">₹&nbsp;{{sale.product_cost - sale.amount_received | number : '.2'}}</span>
            </span> -->
          </ion-col>
          <ion-col col-3 class="sub-header-text">
            {{sale.sale_status}}
          </ion-col>
        </ion-row>
      </ion-col>
      <ion-row>
        <ion-col class="header-text">
          Total Pending Amount = ₹&nbsp;{{total_cost_partial | number : '.2'}}
        </ion-col>
      </ion-row>
    </span>
    <ion-row>
      <ion-col>
        <!-- <span class="header-text" *ngIf="domestic_quote['bag_type_id'] == 1">Total Outstanding = <span class="sub-header-text">₹&nbsp;{{totalCost(domestic_quote.rate, domestic_quote.bag_count, 50) | number : '.2'}}</span></span> -->
        <!-- <span class="header-text" *ngIf="domestic_quote['bag_type_id'] == 3">Total Outstanding = <span class="sub-header-text">₹&nbsp;{{totalCost(domestic_quote.rate, domestic_quote.bag_count, 25) | number : '.2'}}</span></span> -->
      </ion-col>
    </ion-row>
  </ion-card>
</ion-content>