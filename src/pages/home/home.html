<ion-header>
  <ion-navbar>
    <ion-title>Home</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <span style="float:right; color:chocolate;font-size:17px; font-weight:bold" (click)="logout()">logout</span>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <span *ngFor="let domestic_quote of domestic_quotes; let i = index">
    <ion-card style="padding-bottom:0px; margin-bottom:0px" [ngClass]="{active: isLevel1Shown('idx'+i)}">
      <ion-card-header>
        <ion-row>
          <ion-col (click)="toggleLevel1('idx'+i, domestic_quote.id)">rate: {{domestic_quote.rate}} </ion-col><ion-col><input type="number" [(ngModel)]="accept_quantity" placeholder="Quantity" style="background-color:bisque"></ion-col>
        </ion-row>
        <ion-row>
          <ion-col (click)="toggleLevel1('idx'+i, domestic_quote.id)">date: {{domestic_quote.date}} </ion-col><ion-col><button ion-button (click)="acceptBid(accept_quantity, domestic_quote.id, 'bid_accepted')">accept</button></ion-col>
        </ion-row>
      </ion-card-header>  
    </ion-card>

    <ion-card *ngIf="isLevel1Shown('idx'+i)">
      <ion-card *ngFor="let bidding of bidding_history">
        <ion-card-header>
          buyer_rate: {{bidding.buyer_rate}} - spc_rate: {{bidding.spc_rate}}
        </ion-card-header>
      </ion-card>
      <ion-row>
        <ion-col>
          <input type="number" placeholder="Rate" [(ngModel)]="rate" style="background-color:bisque">
        </ion-col>
        <ion-col>
          <input type="number" placeholder="Quantity" [(ngModel)]="quantity" style="background-color:bisque">
        </ion-col>
        <ion-col><input type="date" [(ngModel)]="todate"></ion-col>
        <ion-col>
          <button ion-button (click)="bidding(quantity, domestic_quote.id, 'bidding', rate)">Bid</button>
        </ion-col>
      </ion-row>
    </ion-card>
    </span>
</ion-content>
