<ion-header>
  <ion-navbar>
    <ion-row>
      <!--<ion-col col-2>-->
        <!--<img src="assets/icon/coconut-tree.jpg" class="navbar-icon">-->
      <!--</ion-col>-->
      <ion-col>
        <ion-title>
          <span class="navbar-title">Shree Parshwanath Corporation</span>
        </ion-title>
      </ion-col>
      <ion-col></ion-col>
    </ion-row>
  </ion-navbar>
</ion-header>


<ion-content padding>

  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <span class="logout-button" (click)="logout()">logout</span>
  <br>
  <br>
  <ion-row>
    <ion-col class="rate-col">
      <!--Today's quote  -->
      <h3 text-center padding-top>Today's Rate:</h3>
      <h1 text-center>
        <span>
        ₹ {{domestic_quote_of_the_day}}
        </span>
      </h1>
    </ion-col>
    <ion-col>
      <h3 text-center padding-top (click)="routePaymentDetails()">Enter Payment Details</h3>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col text-center padding-top>
      <span><strong>Advance payment needed for more than <em>10 bags</em></strong></span>
    </ion-col>
  </ion-row>
  <hr>
  <span *ngIf="pending_amount == 0">
    <ion-label style="text-align: left; margin-left: 10px"><i>Step 1: Choose Mark:</i></ion-label>
    <ion-row radio-group [(ngModel)]="brands">
      <ion-col style="margin-left:10px;" *ngFor="let copra_brand of copra_brands">
        <ion-item style="background-color: #9C9085; border-radius: 5px">
          <ion-radio item-left [value]="copra_brand.id" class="radio-button-style"></ion-radio><ion-label style="margin-left: 0px">{{copra_brand.name}}&nbsp;<span>{{copra_brand.notes}}</span></ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
  </span>

  <span *ngIf="pending_amount != 0">
    <ion-row>
      <ion-col text-center padding-top>
        <h2><strong>You need to Pay the <em> Pending Amount&nbsp;₹&nbsp;{{payment_details['pending_amount'] | number: '.2'}}</em>&nbsp; to continue the purchase!</strong></h2>
      </ion-col>
    </ion-row>
    
    <ion-label *ngIf="brands" style="text-align: left; margin-left: 10px"><i>Step 2: Select Bag Size</i></ion-label>
    <ion-row *ngIf="brands" radio-group [(ngModel)]="selected_bag_type">
      <ion-col style="margin-left:10px;" *ngFor="let bag_type of bag_types">
        <ion-item style="background-color: #9C9085; border-radius: 5px">
          <ion-radio item-left [value]="bag_type.id" class="radio-button-style"></ion-radio>
          <ion-label>{{bag_type.weight}} Kg ({{bag_type.common_name}})</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    
    <ion-row>
      <ion-col *ngIf="selected_bag_type == 2">
        <ion-label *ngIf="brands" style="text-align: left; margin-left: 10px"><i>Step 3: Enter Bag Count</i></ion-label>
        <h4 style="text-align: center; margin-left: 10px"><strong>Your limit&nbsp;<em>{{buyer_limit['25kg']}} bags!</em></strong></h4>
        <input style="border-radius:10px; height: 30px; text-align: center;" type="number" (click)="onInputChecked()" [(ngModel)]="bag_count_25kg" max="10">
        <br> 25 Kgs
        <br> Katta
      </ion-col>
      <ion-col *ngIf="selected_bag_type == 1">
        <ion-label *ngIf="brands" style="text-align: left; margin-left: 10px"><i>Step 3: Enter Bag Count</i></ion-label>
        <h4 style="text-align: center; margin-left: 10px"><strong>Your limit&nbsp;<em>{{buyer_limit['50kg']}} bags!</em></strong></h4>
        <input style="border-radius:10px; height: 30px; text-align: center;" type="number" (click)="onInputChecked()" [(ngModel)]="bag_count_50kg" max="10">
        <br> 50 Kgs
        <br> Bori
      </ion-col>
    </ion-row>
  </span>
    
  <h6 text-center *ngIf="selected_bag_type == 2">₹ {{domestic_quote_of_the_day}} x {{bag_count_25kg}} bags x 25 kgs = ₹ {{totalCost(domestic_quote_of_the_day, bag_count_25kg, 25) | number : '.2'}}
    <br>
    <h6 text-center>Net rate <em>inclusive</em> of Package Weight</h6></h6>
  <h6 text-center *ngIf="selected_bag_type == 1">₹ {{domestic_quote_of_the_day}} x {{bag_count_50kg}} bags x 50 kgs = ₹ {{totalCost(domestic_quote_of_the_day, bag_count_50kg, 50) | number : '.2'}}
    <br>
  <h6 text-center>Net rate <em>inclusive</em> of Package Weight</h6></h6>

  <ion-row>
    <ion-col></ion-col>
    <ion-col *ngIf="domestic_quote_of_the_day">
      <span *ngIf="selected_bag_type == 2">
        <button ion-button (click)="confirmOrder(brands, domestic_quote_id, bag_count_25kg, bag_count_50kg, selected_bag_type)" [disabled]="bag_count_25kg == 0 || bag_count_25kg == null">Order</button>
      </span>
      <span *ngIf="selected_bag_type == 1">
        <button ion-button (click)="confirmOrder(brands, domestic_quote_id, bag_count_25kg, bag_count_50kg, selected_bag_type)" [disabled]="bag_count_50kg == 0 || bag_count_50kg == null">Order</button>
      </span>
    </ion-col>
    <ion-col> </ion-col>
  </ion-row>
  <span *ngIf="pending_amount == 0">
    For orders above 10 bags please Contact:&nbsp;
    <a style="text-decoration:none" href="tel:+917538812444">
      <ion-icon name="call"></ion-icon>
      7538812444</a>
  </span>
</ion-content>